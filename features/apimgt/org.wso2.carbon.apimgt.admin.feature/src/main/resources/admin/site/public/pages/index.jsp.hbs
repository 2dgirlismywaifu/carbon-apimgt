<%--
~ Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
~
~ WSO2 Inc. licenses this file to you under the Apache License,
~ Version 2.0 (the "License"); you may not use this file except
~ in compliance with the License.
~ You may obtain a copy of the License at
~
~    http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing,
~ software distributed under the License is distributed on an
~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
~ KIND, either express or implied.  See the License for the
~ specific language governing permissions and limitations
~ under the License.
--%>

<%@page import="java.io.FileInputStream"%>
<%@page import="java.io.File"%>
<%@page import="java.io.InputStreamReader"%>
<%@page import="java.net.URL"%>
<%@page import="java.io.FileReader"%>
<%@page import="java.io.BufferedReader"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>

<%
    String context = null;
    String current = new File(".").getCanonicalPath();
    String webappPath = "/repository/deployment/server/webapps/";
    String txtFilePath = current + webappPath + "admin-webapp/public/conf/settings.js";
    BufferedReader reader = new BufferedReader(new FileReader(txtFilePath));
    StringBuilder sb = new StringBuilder();
    String line;

    while((line = reader.readLine())!= null){
        if(line.contains("context")) {
            String test1 = line.split("//")[0];
            String context1 = test1.split(":")[1];
            String context2 = context1.substring(2, context1.length()-2);
            context = context2.substring(0, context2.length()-1);
        }
    }
%>

<html>
<head>
    <base href="<%= context %>/" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=1024, initial-scale=1" />
    <title>[Admin Portal]WSO2 APIM</title>
    <p><%= context %></p>

    <link href="<%= context %>/public/css/main.css" type="text/css" rel="stylesheet" />
    <link href="<%= context %>/public/css/draftjs.css" type="text/css" rel="stylesheet" />
    <link rel="shortcut icon" href="<%= context %>/public/images/favicon.png">

</head>

<body>

<div id="react-root">
    <div class="apim-dual-ring"></div>
</div>

<script src="<%= context %>/public/fonts/iconfont/MaterialIcons.js"></script>
<script src="<%= context %>/public/conf/defaultTheme.js"></script>
<script src="<%= context %>/public/conf/settings.js"></script>
<script src="<%= context %>/{{ htmlWebpackPlugin.files.js[0] }}"></script>
<link rel="stylesheet" href="<%= context %>/public/fonts/iconfont/material-icons.css">

</body>
</html>
